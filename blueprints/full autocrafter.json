{"author":"Luke322","box_max":{"x":0.5,"y":0.75,"z":0.0},"box_min":{"x":-0.5,"y":-1.25,"z":-0.75},"box_size":{"x":1.0,"y":2.0,"z":0.75},"data":{"blocks":[{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":6,"pos_y":6,"pos_z":4,"size_x":0,"size_y":1,"size_z":0,"type":255},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":4,"pos_y":1,"pos_z":4,"size_x":3,"size_y":3,"size_z":0,"type":255},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":4,"pos_y":1,"pos_z":5,"size_x":0,"size_y":3,"size_z":0,"type":52},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":7,"pos_y":1,"pos_z":5,"size_x":0,"size_y":3,"size_z":0,"type":45},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":5,"pos_y":1,"pos_z":5,"size_x":1,"size_y":3,"size_z":0,"type":0},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":5,"pos_y":5,"pos_z":5,"size_x":1,"size_y":3,"size_z":0,"type":1},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":4,"pos_y":5,"pos_z":4,"size_x":0,"size_y":3,"size_z":0,"type":12},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":7,"pos_y":5,"pos_z":4,"size_x":0,"size_y":3,"size_z":0,"type":6},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":4,"pos_y":5,"pos_z":5,"size_x":0,"size_y":3,"size_z":0,"type":13},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":7,"pos_y":5,"pos_z":5,"size_x":0,"size_y":3,"size_z":0,"type":17},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":4,"pos_y":5,"pos_z":3,"size_x":0,"size_y":3,"size_z":0,"type":14},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":7,"pos_y":5,"pos_z":3,"size_x":0,"size_y":3,"size_z":0,"type":18},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":7,"pos_y":1,"pos_z":3,"size_x":0,"size_y":3,"size_z":0,"type":46},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":4,"pos_y":1,"pos_z":3,"size_x":0,"size_y":3,"size_z":0,"type":51},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":5,"pos_y":5,"pos_z":4,"size_x":0,"size_y":0,"size_z":0,"type":255},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":5,"pos_y":1,"pos_z":3,"size_x":0,"size_y":0,"size_z":0,"type":255},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":6,"pos_y":1,"pos_z":3,"size_x":0,"size_y":0,"size_z":0,"type":0},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":5,"pos_y":2,"pos_z":3,"size_x":1,"size_y":2,"size_z":0,"type":0},{"colors":[0,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":5,"pos_y":8,"pos_z":4,"size_x":1,"size_y":0,"size_z":0,"type":0},{"colors":[81,0,0,0,0,0,0],"extra":0,"frame_x":0,"frame_y":0,"frame_z":0,"material":0,"pos_x":5,"pos_y":5,"pos_z":3,"size_x":1,"size_y":3,"size_z":0,"type":2}],"components":[{"alias":"","colors":[0,3],"data":{},"module":"ARCHEAN_junction","occupancies":[{"frame_x":0,"frame_y":0,"frame_z":0,"pos_x":5,"pos_y":1,"pos_z":3,"size_x":0,"size_y":0,"size_z":0}],"orientation":{"w":1.0,"x":0.0,"y":0.0,"z":-0.0},"position":{"x":-0.125,"y":-1.125,"z":-0.625},"type":"LowVoltageBridge"},{"alias":"","colors":[0,3],"data":{},"module":"ARCHEAN_junction","occupancies":[{"frame_x":0,"frame_y":0,"frame_z":0,"pos_x":5,"pos_y":5,"pos_z":4,"size_x":0,"size_y":0,"size_z":0}],"orientation":{"w":1.0,"x":0.0,"y":0.0,"z":-0.0},"position":{"x":-0.125,"y":-0.125,"z":-0.31199999898672104},"type":"LowVoltageJunction"},{"alias":"Crafing Router","colors":[0,3],"data":{},"module":"ARCHEAN_computer","occupancies":[{"frame_x":0,"frame_y":0,"frame_z":0,"pos_x":4,"pos_y":1,"pos_z":4,"size_x":3,"size_y":3,"size_z":0}],"orientation":{"w":1.0,"x":0.0,"y":0.0,"z":-0.0},"position":{"x":0.0,"y":-0.75,"z":-0.4089999943971634},"type":"Router"},{"alias":"","colors":[0,3],"data":{"hdd":{"capacity":256,"label":"","xc_files":[{"name":"main.xc","plain_code":";\t--- Settings ---\nvar $crafter_count = 1\nvar $container_count = 1\n\nvar $H2_tank_count = 1\nvar $H2O_tank_count = 1\nvar $CH4_tank_count = 1\nvar $CO2_tank_count = 1\nvar $N_tank_count = 1\nvar $O2_tank_count = 1\n\nvar $H2_tank_volume = 14\nvar $H2O_tank_volume = 14\nvar $CH4_tank_volume = 14\nvar $CO2_tank_volume = 14\nvar $N_tank_volume = 14\nvar $O2_tank_volume = 14\n\n; Text and Button Sizes\nvar $text_size = 2\nvar $scroll_speed = 3\nvar $button_padding = 4\n\n; Button Colors\nvar $default_border_color = black\nvar $default_fill_color = gray\nvar $default_text_color = white\n\nvar $selected_border_color = green\nvar $selected_fill_color = gray\nvar $selected_text_color = white\n\nvar $warning_border_color = red\nvar $warning_fill_color = gray\nvar $warning_text_color = white\n;\t--- Settings ---\n\n;\t--- Variables ---\n; General Global\narray $category_list :text\n\narray $item_pre_queue :text\narray $quantity_pre_queue :number\n\nstorage array $item_queue :text\nstorage array $quantity_queue :number\n\nvar $pre_queued_resources = \"\"\nvar $queued_resources = \"\"\nvar $inventory_resources = \"\"\n\nvar $crafter_progress = 0\n\n; General Draw\nvar $screen = screen(\"Crafting Screen\", 0)\n\nvar $button_w :number\nvar $button_h :number\nvar $screen_w :number\nvar $screen_h :number\n\nvar $d_color = \"\"\nvar $s_color = \"\"\nvar $w_color = \"\"\n\nvar $current_line :number\nvar $current_tab = \"Crafting\"\nvar $scroll_offset = 0\nvar $scroll_limit = 0\n\n; Crafting Draw\nvar $crafting_button_x :number\nvar $crafting_button_w :number\n\nvar $current_category :text\n\nvar $selected_craft = \"None\"\nvar $is_craftable = 0\nvar $craft_quantity = 1\n\n; Storage Draw\narray $resource_list :text  \n\n;\t--- Helper Functions ---\n; Draw Functions\nfunction @labled_button($x :number, $y :number, $width :number, $height :number, $label :text, $border_color :number, $fill_color :number, $text_color :number, $label_offset_x :number, $label_offset_y :number) :number\n\tarray $line_list :text\n\t$line_list.from($label, \"\\n\")\n\tvar $line_amount = size($line_list)\n\n\tvar $start_x = $x - $width/2\n\tvar $end_x = $x + $width/2\n\tvar $start_y = $y - $height/2\n\tvar $end_y = $y + $height/2\n\n\tvar $pressed = $screen.button_rect($start_x, $start_y, $end_x, $end_y, $border_color, $fill_color)\n\t\n\tforeach $line_list ($line_number, $line_text)\n\t\tvar $line_x = $x - $screen.char_w*size($line_text)/2 + $label_offset_x + 1\n\t\tvar $line_y = $y + $screen.char_h*($line_number - $line_amount/2) + $label_offset_y + 1\n\n\t\t$screen.write($line_x, $line_y, $text_color, $line_text)\n\t\n\treturn $pressed\n\nfunction @scroll_buttons($x :number, $y :number, $width :number, $height :number, $parts :number, $offset :number, $speed :number, $limit :number) :number\n\tvar $part_h = $height/$parts\n\n\tif @labled_button($x, $y-$part_h/2*($parts + 1)/2, $width, $part_h*($parts - 1)/2, \"+\", $d_color.border, $d_color.fill, $d_color.text)\n\t\t$offset += $speed\n\tif @labled_button($x, $y, $width, $part_h, \"0\", $d_color.border, $d_color.fill, $d_color.text)\n\t\t$offset = 0\n\tif @labled_button($x, $y+$part_h/2*($parts + 1)/2, $width, $part_h*($parts - 1)/2, \"-\", $d_color.border, $d_color.fill, $d_color.text)\n\t\t$offset -= $speed\n\n\tif $limit >= 0\n\t\t$offset = 0\n\telse\n\t\t$offset = clamp($offset, $limit, 0)\n\n\treturn $offset\n\nfunction @tab_buttons($x :number, $y :number, $width :number, $height :number, $tabs :text, $y_tab :text) :text\n\tarray $tab_list :text\n\t$tab_list.from($tabs, \", \")\n\tvar $tab_w = $width/$tab_list.size\n\n\tforeach $tab_list ($i, $tab)\n\t\tvar $pressed = 0\n\t\tvar $tab_x = $x+($tab_w*(1+2*$i)-$width)/2\n\t\tif $tab == $y_tab\n\t\t\t$pressed = @labled_button($tab_x, $y, $tab_w, $height, $tab, $s_color.border, $s_color.fill, $s_color.text)\n\t\telse\n\t\t\t$pressed = @labled_button($tab_x, $y, $tab_w, $height,  $tab, $d_color.border, $d_color.fill, $d_color.text)\n\t\tif $pressed\n\t\t\t$y_tab = $tab\n\treturn $y_tab\n\nfunction @quantity_buttons($x :number, $y :number, $width :number, $height :number, $labels :text, $current_quantity :number) :number\n\tarray $label_list :text\n\t$label_list.from($labels, \", \")\n\tvar $lable_count = $label_list.size\n\tvar $label_h = $height/$lable_count\n\n\tforeach $label_list ($i, $label)\n\t\tvar $label_y = $y+($label_h*(1+2*$i)-$height)/2\n\t\tif @labled_button($x, $label_y, $width, $label_h, $label, $d_color.border, $d_color.fill, $d_color.text)\n\t\t\tif $i < $lable_count/2 - 0.5\n\t\t\t\t$current_quantity += 10^(round($lable_count/2-1)-$i)\n\t\t\telseif $i == $lable_count/2 - 0.5\n\t\t\t\t$current_quantity = 1\n\t\t\telse\n\t\t\t\t$current_quantity -= 10^($i-round($lable_count/2))\n\n\tif $current_quantity < 1\n\t\t$current_quantity = 1\n\treturn $current_quantity\n; Queue Functions\nfunction @get_category($item :text) :text\n\tforeach $category_list ($i, $category)\n\t\tarray $category_items :text\n\t\t$category_items.from(get_recipes(\"crafter\", $category), \",\")\n\t\tforeach $category_items ($j, $category_item)\n\t\t\tif $category_item == $item\n\t\t\t\treturn $category\n\treturn \"\"\nfunction @pre_queue_craft($craft :text)\n\t$item_pre_queue.clear()\n\t$quantity_pre_queue.clear()\n\t$pre_queued_resources = \"\"\n\n\t$item_pre_queue.append($craft)\n\t$quantity_pre_queue.append(1)\n\n\tvar $i = 0\n\twhile $i != $item_pre_queue.size\n\t\tvar $ingridients = get_recipe(\"crafter\", @get_category($item_pre_queue.$i), $item_pre_queue.$i)\n\t\tforeach $ingridients ($ingridient, $amount)\n\t\t\tif @get_category($ingridient) != \"\"\n\t\t\t\t$item_pre_queue.append($ingridient)\n\t\t\t\t$quantity_pre_queue.append($quantity_pre_queue.$i*$amount)\n\t\t\telse\n\t\t\t\t$pre_queued_resources.$ingridient += $amount\n\t\t$i += 1\n\n\t$i = 0\n\twhile $i < $item_pre_queue.size\n\t\tvar $j = 0\n\t\twhile $j < $item_pre_queue.size-1-$i\n\t\t\tvar $k = $item_pre_queue.size-1-$i\n\t\t\tif $item_pre_queue.$j == $item_pre_queue.$k\n\t\t\t\t$quantity_pre_queue.$k += $quantity_pre_queue.$j\n\t\t\t\t$item_pre_queue.erase($j)\n\t\t\t\t$quantity_pre_queue.erase($j)\n\t\t\telse\n\t\t\t\t$j += 1\n\t\t$i += 1\nfunction @queue_craft($quantity :number)\n\twhile $item_pre_queue.size != 0\n\t\t$item_queue.append($item_pre_queue.last)\n\t\t$quantity_queue.append($quantity_pre_queue.last*$quantity)\n\t\t$item_pre_queue.pop()\n\t\t$quantity_pre_queue.pop()\n\t$selected_craft = \"None\"\n\t$pre_queued_resources = \"\"\n; Inventory Functions\nfunction @get_container_inventory($inventory_count :number)\n\tvar $contents = \"\"\n\tvar $i = 1\n\n\twhile $i <= $inventory_count\n\t\t$contents = input_text(\"Container \" & $i :text, 0)\n\t\tforeach $contents ($item, $amount)\n\t\t\t$inventory_resources.$item += $amount\n\t\t$i += 1\nfunction @get_tank_inventory($tank_type :text, $inventory_count :number, $tank_volume :number)\n\tvar $fill_level = 0\n\tvar $i = 1\n\twhile $i <= $inventory_count\n\t\t$fill_level += input_number($tank_type & \" Tank \" & $i :text, 0)\n\t\t$i += 1\n\n\tvar $density = 0\n\tif $tank_type == \"H2\"\n\t\t$density = 100\n\telseif $tank_type == \"H2O\"\n\t\t$density = 1000\n\telseif $tank_type == \"CH4\"\n\t\t$density = 400\n\telseif $tank_type == \"CO2\"\n\t\t$density = 1\n\telseif $tank_type == \"N\"\n\t\t$density = 1\n\telseif $tank_type == \"O2\"\n\t\t$density = 1600\n\n\t$inventory_resources.$tank_type = $fill_level*$tank_volume*$density\n\nfunction @get_all_inventories()\n\t$inventory_resources = \"\"\n\t@get_container_inventory($container_count)\n\t@get_tank_inventory(\"H2\", $H2_tank_count, $H2_tank_volume)\n\t@get_tank_inventory(\"H2O\", $H2O_tank_count, $H2O_tank_volume)\n\t@get_tank_inventory(\"CH4\", $CH4_tank_count, $CH4_tank_volume)\n\t@get_tank_inventory(\"CO2\", $CO2_tank_count, $CO2_tank_volume)\n\t@get_tank_inventory(\"N\", $N_tank_count, $N_tank_volume)\n\t@get_tank_inventory(\"O2\", $O2_tank_count, $O2_tank_volume)\nfunction @get_item_resources($item :text) :text\n\tvar $resources = \"\"\n\tvar $ingridients = get_recipe(\"crafter\", @get_category($item), $item)\n\n\tforeach $ingridients ($ingridient, $amount)\n\t\tif @get_category($ingridient) == \"\"\n\t\t\t$resources.$ingridient += $amount\n\treturn $resources\nfunction @get_queued_resources()\n\t$queued_resources = \"\"\n\tforeach $item_queue ($i, $item)\n\t\tvar $item_resources = @get_item_resources($item)\n\t\tforeach $item_resources ($item_resource, $amount)\n\t\t\t$queued_resources.$item_resource += $amount*$quantity_queue.$i\n; Storage Functions\nfunction @scientific_format($number :number) :text\n\tvar $number_text = text(\"{0e.00}\", $number)\n\tvar $leading_digits = substring($number_text, 0, find($number_text, \"e\"))\n\tvar $exponent = substring($number_text, find($number_text, \"e\")+1, size($number_text))\n\tvar $suffix = \"\"\n\tvar $is_positive = 1\n\n\tif $exponent < 0\n\t\t$is_positive = 0\n\n\tif floor($exponent/3) == 1\n\t\t$suffix = \"k\"\n\telseif floor($exponent/3) == -1\n\t\t$suffix = \"m\"\n\telseif floor($exponent/3) == 2\n\t\t$suffix = \"M\"\n\telseif floor($exponent/3) == -2\n\t\t$suffix = \"u\"\n\telseif floor($exponent/3) == 3\n\t\t$suffix = \"G\"\n\telseif floor($exponent/3) == -3\n\t\t$suffix = \"n\"\n\telseif floor($exponent/3) == 4\n\t\t$suffix = \"T\"\n\telseif floor($exponent/3) == -4\n\t\t$suffix = \"p\"\n\telseif floor($exponent/3) == 5\n\t\t$suffix = \"P\"\n\telseif floor($exponent/3) == -5\n\t\t$suffix = \"f\"\n\telseif floor($exponent/3) == 6\n\t\t$suffix = \"E\"\n\telseif floor($exponent/3) == -6\n\t\t$suffix = \"a\"\n\telseif floor($exponent/3) == 7\n\t\t$suffix = \"Z\"\n\telseif floor($exponent/3) == -7\n\t\t$suffix = \"z\"\n\telseif floor($exponent/3) == 8\n\t\t$suffix = \"Y\"\n\telseif floor($exponent/3) == -8\n\t\t$suffix = \"y\"\n\telseif floor($exponent/3) == 9\n\t\t$suffix = \"R\"\n\telseif floor($exponent/3) == -9\n\t\t$suffix = \"r\"\n\telseif floor($exponent/3) == 10\n\t\t$suffix = \"Q\"\n\telseif floor($exponent/3) == -10\n\t\t$suffix = \"q\"\n\n\tif $is_positive\n\t\treturn text(\"{}{}\", $leading_digits*(10^($exponent%3)), $suffix)\n\telse\n\t\treturn text(\"{}{}\", $leading_digits*(10^((3+$exponent%3)%3)), $suffix)\nfunction @element_name($element :text) :text\n\tvar $name = $element\n\n\tif $element == \"C\"\n\t\t$name = \"Carbon\"\n\telseif $element == \"Al\"\n\t\t$name = \"Aluminium\"\n\telseif $element == \"Si\"\n\t\t$name = \"Silicon\"\n\telseif $element == \"Ti\"\n\t\t$name = \"Titanium\"\n\telseif $element == \"Cr\"\n\t\t$name = \"Chrome\"\n\telseif $element == \"Fe\"\n\t\t$name = \"Iron\"\n\telseif $element == \"Ni\"\n\t\t$name = \"Nickel\"\n\telseif $element == \"Cu\"\n\t\t$name = \"Copper\"\n\telseif $element == \"Ag\"\n\t\t$name = \"Silver\"\n\telseif $element == \"Sn\"\n\t\t$name = \"Tin\"\n\telseif $element == \"W\"\n\t\t$name = \"Tungsten\"\n\telseif $element == \"Au\"\n\t\t$name = \"Gold\"\n\telseif $element == \"Pb\"\n\t\t$name = \"Lead\"\n\telseif $element == \"U\"\n\t\t$name = \"Uranium\"\n\n\treturn $name\nfunction @draw_recource_line($y :number, $resource :text, $pre_queued :text, $queued :text, $avalible :text, $color :number)\n\tvar $invis = color(0, 0, 0, 0)\n\n\t$screen.write($screen_w*1/4-$screen.char_w/2, $y, $color, \":\")\n\t$screen.write($screen_w*2/4-$screen.char_w/2, $y, $color, \"|\")\n\t$screen.write($screen_w*3/4-$screen.char_w/2, $y, $color, \"|\")\n\n\t@labled_button($screen_w*1/8, $y+$screen.char_h/2, 0, 0, $resource, $invis, $invis, $color)\n\t@labled_button($screen_w*3/8, $y+$screen.char_h/2, 0, 0, $pre_queued, $invis, $invis, $color)\n\t@labled_button($screen_w*5/8, $y+$screen.char_h/2, 0, 0, $queued, $invis, $invis, $color)\n\t@labled_button($screen_w*7/8, $y+$screen.char_h/2, 0, 0, $avalible, $invis, $invis, $color)\n;\t--- Helper Functions ---\n\n;\t--- Main Functions ---\nfunction @init_screen()\n\t$screen.text_size($text_size)\n\n\t$button_h = $screen.char_h+$button_padding\n\t$button_w = $screen.char_w+$button_padding\n\t$screen_h = $screen.height-$button_h\n\t$screen_w = $screen.width-$button_w\n\n\t$d_color.border = $default_border_color\n\t$d_color.fill = $default_fill_color\n\t$d_color.text = $default_text_color\n\n\t$s_color.border = $selected_border_color\n\t$s_color.fill = $selected_fill_color\n\t$s_color.text = $selected_text_color\n\n\t$w_color.border = $warning_border_color\n\t$w_color.fill = $warning_fill_color\n\t$w_color.text = $warning_text_color\n\n\t$crafting_button_x = ($screen_w-$button_w)/2\n\t$crafting_button_w = $screen_w-$button_w\n\n\t$current_category = \"None\"\n\nfunction @update_screen()\n\t$screen.blank(black)\n\t$screen.text_size($text_size)\n\t$current_line = 1.5 + $scroll_offset\n\t\n\tif $current_tab == \"Crafting\"\n\t\tforeach $category_list ($i, $category)\n\t\t\tif @labled_button($crafting_button_x, $button_h*$current_line, $crafting_button_w, $button_h, $category, $d_color.border, $d_color.fill, $d_color.text) and $current_line >= 1.5 and $current_line < $screen_h/$button_h + 0.5\n\t\t\t\t$selected_craft = \"None\"\n\t\t\t\t$pre_queued_resources = \"\"\n\t\t\t\tif $current_category != $category\n\t\t\t\t\t$current_category = $category\n\t\t\t\telse\n\t\t\t\t\t$current_category = \"None\"\n\t\t\t$current_line += 1\n\t\t\tif $current_category == $category\n\t\t\t\tarray $category_items : text\n\t\t\t\t$category_items.from(get_recipes(\"crafter\", $category), \",\")\n\t\t\t\tforeach $category_items ($j, $category_item)\n\t\t\t\t\tvar $border_color = $d_color.border\n\t\t\t\t\tvar $fill_color = $d_color.fill\n\t\t\t\t\tvar $text_color = $d_color.text\n\t\t\t\t\tif $category_item == $selected_craft\n\t\t\t\t\t\t$is_craftable = 1\n\t\t\t\t\t\t$border_color = $s_color.border\n\t\t\t\t\t\t$fill_color = $s_color.fill\n\t\t\t\t\t\t$text_color = $s_color.text\n\t\t\t\t\t\tforeach $pre_queued_resources ($resource, $amount)\n\t\t\t\t\t\t\tif $amount*$craft_quantity > $inventory_resources.$resource - $queued_resources.$resource\n\t\t\t\t\t\t\t\t$is_craftable = 0\n\t\t\t\t\t\t\t\t$border_color = $w_color.border\n\t\t\t\t\t\t\t\t$fill_color = $w_color.fill\n\t\t\t\t\t\t\t\t$text_color = $w_color.text\t\n\t\t\t\t\tif @labled_button($crafting_button_x, $button_h*$current_line, $crafting_button_w-3*$button_padding, $button_h, $category_item, $border_color, $fill_color, $text_color) and $current_line >= 1.5 and $current_line < $screen_h/$button_h + 0.5\n\t\t\t\t\t\tif $category_item == $selected_craft\n\t\t\t\t\t\t\t$selected_craft = \"None\"\n\t\t\t\t\t\t\t$pre_queued_resources = \"\"\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\t$selected_craft = $category_item\n\t\t\t\t\t\t\t@pre_queue_craft($category_item)\n\t\t\t\t\t$current_line += 1\n\t\n\t\t$craft_quantity = @quantity_buttons($screen_w-$button_w/2, $button_h+$screen_h/2, $button_w, $screen_h, \"+\\nk, +\\nh, +\\nd, +, -, -\\nd, -\\nh, -\\nk\", $craft_quantity, $d_color.border, $d_color.fill, $d_color.text)\n\t\tif $selected_craft == \"None\"\n\t\t\t@labled_button($crafting_button_x, $screen.height-$button_h/2, $crafting_button_w, $button_h, \"Craft \" & $craft_quantity : text & \"x\", $d_color.border, $d_color.fill, $d_color.text)\n\t\telseif $is_craftable\n\t\t\tif @labled_button($crafting_button_x, $screen.height-$button_h/2, $crafting_button_w, $button_h, \"Craft \" & $craft_quantity : text & \"x\", $s_color.border, $s_color.fill, $s_color.text)\n\t\t\t\t@queue_craft($craft_quantity)\n\t\t\t\t$selected_craft = \"None\"\n\t\t\t\t$craft_quantity = 1\n\t\telse\n\t\t\t@labled_button($crafting_button_x, $screen.height-$button_h/2, $crafting_button_w, $button_h, \"Craft \" & $craft_quantity : text & \"x\", $w_color.border, $w_color.fill, $w_color.text)\n\tif $current_tab == \"Queue\"\n\t\tforeach $item_queue ($i, $item)\n\t\t\tvar $remaining_items = $quantity_queue.$i-$inventory_resources.$item\n\t\t\tvar $completion = $inventory_resources.$item/$quantity_queue.$i\n\t\t\tif $i == 0\n\t\t\t\t$completion += $crafter_progress/$quantity_queue.$i\n\n\t\t\t$screen.draw_rect(0, $button_h*($current_line-0.5), $screen_w*$completion, $button_h*($current_line+0.5), $d_color.border :number, $d_color.fill :number)\n\t\t\t$screen.write($button_padding, $button_h*($current_line-0.5)+$button_padding, $d_color.text :number, $remaining_items :text & \"x \" & $item)\n\t\t\t$current_line += 1\n\n\tif $current_tab == \"Storage\"\n\t\t$resource_list.from(\"H2, H2O, C, CH4, CO2, N, O2, Al, Si, Ti, Cr, Fe, Ni, Cu, Ag, Sn, W, Au, Pb, U\", \", \")\n\n\t\tforeach $resource_list ($i, $resource)\n\t\t\tvar $resource_name = @element_name($resource)\n\t\t\tvar $pre_queued =  @scientific_format($pre_queued_resources.$resource_name*$craft_quantity)\n\t\t\tvar $queued =  @scientific_format($queued_resources.$resource_name)\n\t\t\tvar $avalible = @scientific_format($inventory_resources.$resource_name-$queued_resources.$resource_name)\n\n\t\t\tvar $color = $s_color.text\n\t\t\tif $inventory_resources.$resource_name < $queued_resources.$resource_name\n\t\t\t\t$color = $w_color.text\n\t\t\telseif $pre_queued_resources.$resource_name*$craft_quantity > $inventory_resources.$resource_name-$queued_resources.$resource_name\n\t\t\t\t$color = $d_color.text\n\n\t\t\t@draw_recource_line($button_h*($current_line-0.5)+$button_padding, $resource, $pre_queued, $queued, $avalible, $color)\n\t\t\t\n\t\t\t$current_line += 1\n\t\t\t\n\t$current_tab = @tab_buttons($screen.width/2, $button_h/2, $screen.width, $button_h, \"Crafting, Queue, Storage\", $current_tab)\n\t$scroll_offset = @scroll_buttons($screen_w+$button_w/2, $button_h+$screen_h/2, $button_w, $screen_h, 8, $scroll_offset, $scroll_speed, $scroll_limit)\n\t$scroll_limit = $screen_h/$button_h-($current_line-$scroll_offset) + 0.5\nfunction @update_resources()\n\t@get_all_inventories()\n\t@get_queued_resources()\nfunction @crafting_loop()\n\t$crafter_progress = 0\n\tvar $active_crafters = 0\n\tvar $i = 1\n\twhile $i <= $crafter_count\n\t\tvar $progress = input_number(\"Crafter \" & $i :text, 0)\n\t\t$crafter_progress += $progress\n\t\tif abs($progress) != 1 and $progress != 0\n\t\t\t$active_crafters += 1\n\t\t$i += 1\n\t\n\tif $item_queue.size != 0\n\t\tvar $current_craft = $item_queue.0\n\t\t$i = 1\n\t\twhile $i <= $crafter_count\n\t\t\tvar $progress = input_number(\"Crafter \" & $i :text, 0)\n\t\t\tif ($quantity_queue.0 > $active_crafters + $inventory_resources.$current_craft) and (abs($progress) == 1 or $progress == 0)\n\t\t\t\toutput_text(\"Crafter \" & $i :text, 1, $current_craft)\n\t\t\t\toutput_number(\"Crafter \" & $i :text, 0, 1)\n\t\t\t\toutput_number(\"Crafter \" & $i :text, 0, 0)\n\t\t\t\t$active_crafters += 1\n\t\t\t$i += 1\n\n\t\tif $quantity_queue.0 <= $inventory_resources.$current_craft\n\t\t\t$item_queue.erase(0)\n\t\t\t$quantity_queue.erase(0)\n;\t--- Main Functions ---\n\n;\t--- Main ---\ninit\n\t$category_list.from(get_recipes_categories(\"crafter\"), \",\")\n\t@init_screen()\n\t\ntick\n\t@update_screen()\n\t@update_resources()\n\t@crafting_loop()\n;\t--- Main ---"}]},"program":"","version":1},"module":"ARCHEAN_computer","occupancies":[{"frame_x":0,"frame_y":0,"frame_z":0,"pos_x":6,"pos_y":6,"pos_z":4,"size_x":0,"size_y":1,"size_z":0}],"orientation":{"w":1.0,"x":0.0,"y":0.0,"z":-0.0},"position":{"x":0.0,"y":0.25,"z":-0.375},"type":"MiniComputer"},{"alias":"Crafting Screen","colors":[0,3],"data":{"color":{"a":255,"b":255,"g":255,"r":255},"elements":[{"baseColor":{"a":255,"b":0,"g":0,"r":0},"baseMetallic":0,"baseRoughness":0,"mainColor":{"a":255,"b":255,"g":255,"r":8},"mainMetallic":0,"mainRoughness":0,"pos_x":0,"pos_y":0,"size_x":50,"size_y":50,"type":"HdScreen"},{"baseColor":{"a":255,"b":255,"g":255,"r":255},"baseMetallic":0,"baseRoughness":0,"mainColor":{"a":255,"b":0,"g":0,"r":0},"mainMetallic":0,"mainRoughness":0,"pos_x":0,"pos_y":50,"size_x":50,"size_y":25,"text":"Icarus Inc.\n\nAuto Crafter","textAlign":16,"textSize":3,"type":"Label"}],"metallic":255,"roughness":255,"size_x":50,"size_y":75,"version":1},"module":"ARCHEAN_build","occupancies":[],"orientation":{"w":0.9925075525433654,"x":-0.1221832921628364,"y":-9.527927131115313e-10,"z":-1.1729417084878177e-10},"position":{"x":-0.2499899811693468,"y":0.022113698805463433,"z":-0.06802836709181684},"type":"Dashboard"}],"composite_builds":[],"doors":[],"frames":[],"labels":[],"pipes":[{"a_component":1,"a_port":"lowvoltage-port.003","b_component":2,"b_port":"lowvoltage","radius":0.019999999552965164,"segments":[{"a":255,"b":4,"box":false,"chrome":false,"dir":4,"flexible":true,"g":8,"glossy":false,"length":0.09766267985105515,"metal":false,"r":96,"rounded_caps":true,"start":{"x":-0.06300000101327896,"y":-0.27000001072883606,"z":-0.31200000643730164},"striped":false},{"a":0,"b":0,"box":false,"chrome":false,"dir":0,"flexible":true,"g":0,"glossy":false,"length":0.0,"metal":false,"r":0,"rounded_caps":true,"start":{"x":0.0,"y":-0.23000000417232513,"z":-0.375},"striped":false}],"type":"lowvoltage"},{"a_component":1,"a_port":"lowvoltage-port.001","b_component":3,"b_port":"power_connector","radius":0.019999999552965164,"segments":[{"a":255,"b":4,"box":false,"chrome":false,"dir":1,"flexible":true,"g":8,"glossy":false,"length":0.5039543509483337,"metal":false,"r":96,"rounded_caps":true,"start":{"x":-0.06300000101327896,"y":0.019999999552965164,"z":-0.31200000643730164},"striped":false},{"a":0,"b":0,"box":false,"chrome":false,"dir":0,"flexible":true,"g":0,"glossy":false,"length":0.0,"metal":false,"r":0,"rounded_caps":true,"start":{"x":0.0,"y":0.5199999809265137,"z":-0.31299999356269836},"striped":false}],"type":"lowvoltage"},{"a_component":3,"a_port":"data_port.000","b_component":4,"b_port":"data-connector","radius":0.019999999552965164,"segments":[{"a":255,"b":96,"box":false,"chrome":false,"dir":0,"flexible":true,"g":24,"glossy":false,"length":0.19822487235069275,"metal":false,"r":16,"rounded_caps":true,"start":{"x":0.14499999582767487,"y":0.44999998807907104,"z":-0.31299999356269836},"striped":false},{"a":0,"b":0,"box":false,"chrome":false,"dir":0,"flexible":true,"g":0,"glossy":false,"length":0.0,"metal":false,"r":0,"rounded_caps":true,"start":{"x":1.0019039109465666e-05,"y":0.38155147433280945,"z":-0.19644181430339813},"striped":false}],"type":"data"},{"a_component":3,"a_port":"data_port.001","b_component":2,"b_port":"data_port.001","radius":0.019999999552965164,"segments":[{"a":255,"b":96,"box":false,"chrome":false,"dir":0,"flexible":true,"g":24,"glossy":false,"length":0.8433712124824524,"metal":false,"r":16,"rounded_caps":true,"start":{"x":0.14499999582767487,"y":0.3700000047683716,"z":-0.31299999356269836},"striped":false},{"a":0,"b":0,"box":false,"chrome":false,"dir":0,"flexible":true,"g":0,"glossy":false,"length":0.0,"metal":false,"r":0,"rounded_caps":true,"start":{"x":0.5199999809265137,"y":-0.375,"z":-0.43799999356269836},"striped":false}],"type":"data"},{"a_component":1,"a_port":"lowvoltage-input","b_component":0,"b_port":"port1","radius":0.019999999552965164,"segments":[{"a":255,"b":4,"box":false,"chrome":false,"dir":3,"flexible":true,"g":8,"glossy":false,"length":1.024328589439392,"metal":false,"r":96,"rounded_caps":true,"start":{"x":-0.27000001072883606,"y":-0.125,"z":-0.31200000643730164},"striped":false},{"a":0,"b":0,"box":false,"chrome":false,"dir":0,"flexible":true,"g":0,"glossy":false,"length":0.0,"metal":false,"r":0,"rounded_caps":true,"start":{"x":-0.125,"y":-1.125,"z":-0.47999998927116394},"striped":false}],"type":"lowvoltage"}],"symmetry_axis":1,"version":2},"datetime":"2024-06-30 09:01:42","mass":38.25,"type":"Archean Build Blueprint","version":1,"workshop_item_id":3278621686}